<div class="row page_header">
  <div *ngIf="!isUpload" class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
    <h5>
      <b>Weekly Shifts</b>
    </h5>
  </div>
  <div *ngIf="!isUpload" class="col-xs-4 col-sm-4 col-md-4 col-lg-4 ">
    <div>
      <input id="dateSelector" style="width: auto;float: left;" class="form-control input-sm calendar no-spin" type="text">
    </div>
    <div class="headerBtn">
      <button md-icon-button class="dwnldBtn" [disabled]="isDownloading || employees?.isLoading || employee?.isProcessing" (click)="download()"
        mdTooltip="Download Excel" [mdTooltipPosition]="'above'">
        <md-icon>cloud_download</md-icon>
      </button>
      <a md-icon-button [disabled]="isDownloading || employees?.isLoading || employee?.isProcessing" (click)="excel()" mdTooltip="Upload Excel"
        [mdTooltipPosition]="'above'">
        <md-icon>cloud_upload</md-icon>
      </a>
    </div>

  </div>
  <div *ngIf="isUpload" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
    <span style="float: left">
      <b>Excel Upload</b>
    </span>&nbsp;&nbsp;
    <input class="file" id="uploader" type="file" ng2FileSelect [uploader]="uploader" />
    <div *ngFor="let item of uploader.queue" class="queue">
      <button md-icon-button class="uploadBtn" (click)="item.upload()" [disabled]="item.isReady || item.isUploading || item.isSuccess">
        <md-icon>cloud_upload</md-icon>
      </button>
      <button md-icon-button class="uploadBtn" (click)="excel()" [disabled]="item.isReady || item.isUploading  || uploader.isUploading">
        <md-icon>highlight_off</md-icon>
      </button>
    </div>
    <button *ngIf="uploader?.queue?.length == 0" class="uploadBtn" (click)="excel()" md-icon-button>
      <md-icon>highlight_off</md-icon>
    </button>
  </div>
</div>
<md-spinner class="custom_spinner" *ngIf="effectiveShifts?.isLoading || effectiveShift?.isProcessing" mode="indeterminate"></md-spinner>
<div class="row">
  <md-card class="card">
    <table class="table table-condensed table-hover">
      <thead class="primary_thead">
        <tr>
          <th class="tdWidth">Code</th>
          <th class="tdWidth">Name</th>
          <th class="tdWidth" *ngFor="let date of dates">{{date | date:'dd/MM/yyyy'}}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let effectiveShift of effectiveShifts.items | paginate: { id: 'foo',
        itemsPerPage: effectiveShifts.pageSize,
        currentPage: effectiveShifts.pageNo,
        totalItems: effectiveShifts.totalRecords };">
          <td class="tdWidth">{{effectiveShift.employee.code || '--'}}</td>
          <td class="tdWidth">{{effectiveShift.employee.name || '--'}}</td>
          <td class="tdWidth" *ngFor="let date of dates">
            <aqua-shift-picker [shiftTypes]="shiftTypes.items" [effectiveShifts]="effectiveShift.shifts" [date]="date" (onChange)="changeShift($event, date,effectiveShift.employee)"></aqua-shift-picker>
          </td>

        </tr>
      </tbody>
    </table>
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      <div class="custom_pagination">
        <pagination-controls id="foo" (pageChange)="effectiveShifts.pageNo = $event;fetchEmp();"></pagination-controls>
        <label>Total Records: {{effectiveShifts.total}}</label>
        <div class="pageSize">
          <label>Page Size:</label>
          <select name="pageSize" [(ngModel)]="effectiveShifts.pageSize" (change)="effectiveShifts.pageNo = 1;fetchEmp()">
            <option value=10>10</option>
            <option value=20>20</option>
            <option value=50>50</option>
            <option value=100>100</option>
          </select>
        </div>
      </div>
    </div>

  </md-card>


</div>