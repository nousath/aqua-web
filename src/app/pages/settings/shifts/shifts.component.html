<div class="tool-bar controls-row">
  <h5>Shifts</h5>
  <span class="spacer"></span>
  <div class="input-group">
      <span class="input-group-addon">Department:</span>
    <select class="form-control" [(ngModel)]="selectedDepartment" (change)="fetchByDepartment()">
      <option [ngValue]="null"></option>
      <option *ngFor="let item of departments" [ngValue]="item">{{item.name}}</option>
    </select>
  </div>
  <span class="spacer"></span>
  <button md-icon-button (click)="isFilter = !isFilter" mdTooltip="Filters" [mdTooltipPosition]="'above'">
    <i class="fa fa-filter fa-lg" aria-hidden="true"></i>
  </button>
  <button [matMenuTriggerFor]="moreMenu" md-icon-button>
    <md-icon>more_vert</md-icon>
  </button>

  <md-menu #moreMenu="mdMenu">
    <button md-icon-button [disabled]="shiftTypes?.isLoading" mdTooltip="Add" [mdTooltipPosition]="'above'"
      [routerLink]="['new']">
      &nbsp; <md-icon>add_circle_outline</md-icon>&nbsp;&nbsp; New Shift
    </button>
  </md-menu>
</div>

<md-card class="filters" *ngIf="isFilter">
  <div class="flex-row three">
    <div class="form-group" *ngIf="shiftTypesList.length">
      <label for="pwd">Shift</label>
      <angular2-multiselect [data]="shiftTypesList" class="form-control" [(ngModel)]="selectedShiftType" [settings]="dropdownSettings"
        (onSelect)="onItemSelect($event)" (onDeSelect)="OnItemDeSelect($event)" (onSelectAll)="onSelectAll($event)"
        (onDeSelectAll)="onDeSelectAll($event)" [ngModelOptions]="{standalone: true}"></angular2-multiselect>
    </div>
    <!-- <div class="form-group">
      <label for="email">Start Time</label>
      <input type="time" class="form-control" [(ngModel)]="start">
    </div>
    <div class="form-group">
      <label for="email">End Time</label>
      <input type="time" class="form-control" [(ngModel)]="end">
    </div> -->
  </div>
  <md-card-footer>
    <div class="flex-row">
      <div class="spacer"></div>
      <div class="form-group">
        <button md-button mdTooltip="Reset" [mdTooltipPosition]="'above'" (click)="reset()">Reset</button>
        <button md-raised-button color="primary" mdTooltip="Apply" [mdTooltipPosition]="'above'" (click)="apply()">Apply</button>
      </div>
    </div>
  </md-card-footer>
</md-card>
<md-spinner class="custom_spinner" *ngIf="shiftTypes?.isLoading" mode="indeterminate"></md-spinner>

<md-card class="card">
  <div class="table-responsive">
    <table class="table table-condensed table-hover">
      <thead class="primary_thead">
        <tr>
          <th class="tdWidth">Name</th>
          <th class="tdWidth">Time</th>
          <th class="tdWidth">Department</th>
          <th>Days</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of shiftTypes.items | paginate: { id: 'foo',
                                                      itemsPerPage: shiftTypes.pageSize,
                                                      currentPage: shiftTypes.pageNo,
                                                      totalItems: shiftTypes.totalRecords };"
          class="capitalize">
          <td class="tdWidth" [style.color]="item?.color">
            <div>{{item?.name}}</div>
            <span class="sub-text">{{item?.code}}</span>
          </td>
          <td class="tdWidth">{{item?.startTime | date:'HH:mm'}} to {{item?.endTime | date:'HH:mm'}}</td>
          <td>
            <div>{{item.department? item.department: 'All'}}</div>
            <span class="sub-text" *ngIf="item.isDynamic">dynamic</span>
          </td>
          <td class="days text-center controls-row">
            <div class="btn-group btn-group-sm" [routerLink]="[item.id]">
              <!-- <div class="btn-group btn-group-sm"> -->
              <button type="button" class="btn btn-sm btn-default" [ngClass]="{
                    'off' :item?.sunday?.toLowerCase() === 'off' || !item?.sunday,
                    'full':item?.sunday?.toLowerCase() === 'full',
                    'half':item?.sunday?.toLowerCase() === 'half',
                    'alt': item?.sunday?.toLowerCase() === 'alternate'}"
                [mdTooltip]="item?.sunday?.toUpperCase()" [mdTooltipPosition]="'above'">Sun</button>
              <button type="button" class="btn btn-sm btn-default" [ngClass]="{
                    'off' :item?.monday?.toLowerCase() === 'off' || !item?.monday,
                    'full':item?.monday?.toLowerCase() === 'full',
                    'half':item?.monday?.toLowerCase() === 'half',
                    'alt': item?.monday?.toLowerCase() === 'alternate'}"
                [mdTooltip]="item?.monday?.toUpperCase()" [mdTooltipPosition]="'above'">Mon</button>
              <button type="button" class="btn btn-sm btn-default" [ngClass]="{
                    'off' :item?.tuesday?.toLowerCase() === 'off' || !item?.tuesday,
                    'full':item?.tuesday?.toLowerCase() === 'full',
                    'half':item?.tuesday?.toLowerCase() === 'half',
                    'alt': item?.tuesday?.toLowerCase() === 'alternate'}"
                [mdTooltip]="item?.tuesday?.toUpperCase()" [mdTooltipPosition]="'above'">Tue</button>
              <button type="button" class="btn btn-sm btn-default" (click)="toggleDay('wednesday')" [ngClass]="{
                    'off' :item?.wednesday?.toLowerCase() === 'off' || !item?.wednesday,
                    'full':item?.wednesday?.toLowerCase() === 'full',
                    'half':item?.wednesday?.toLowerCase() === 'half',
                    'alt': item?.wednesday?.toLowerCase() === 'alternate'}"
                [mdTooltip]="item?.wednesday?.toUpperCase()" [mdTooltipPosition]="'above'">Wed</button>
              <button type="button" class="btn btn-sm btn-default" [ngClass]="{
                    'off' :item?.thursday?.toLowerCase() === 'off' || !item?.thursday,
                    'full':item?.thursday?.toLowerCase() === 'full',
                    'half':item?.thursday?.toLowerCase() === 'half',
                    'alt': item?.thursday?.toLowerCase() === 'alternate'}"
                [mdTooltip]="item?.thursday?.toUpperCase()" [mdTooltipPosition]="'above'">Thu</button>
              <button type="button" class="btn btn-sm btn-default" [ngClass]="{
                    'off' :item?.friday?.toLowerCase() === 'off' || !item?.friday,
                    'full':item?.friday?.toLowerCase() === 'full',
                    'half':item?.friday?.toLowerCase() === 'half',
                    'alt': item?.friday?.toLowerCase() === 'alternate'}"
                [mdTooltip]="item?.friday?.toUpperCase()" [mdTooltipPosition]="'above'">Fri</button>
              <button type="button" class="btn btn-sm btn-default" [ngClass]="{
                      'off' :item?.saturday?.toLowerCase() === 'off' || !item?.saturday,
                      'full':item?.saturday?.toLowerCase() === 'full',
                      'half':item?.saturday?.toLowerCase() === 'half',
                      'alt': item?.saturday?.toLowerCase() === 'alternate'}"
                [mdTooltip]="item?.saturday?.toUpperCase()" [mdTooltipPosition]="'above'">Sat</button>
            </div>
            <span class="spacer"></span>
            <button md-icon-button class="subtle" mdTooltip="Edit" [mdTooltipPosition]="'above'" [routerLink]="[item.id]">
              <i class="fa fa-chevron-right"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</md-card>
