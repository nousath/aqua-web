<div class="row page_header">
  <div *ngIf="!isUpload" class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
    <h5>
      <label>
        <b>Shift Roster</b>
      </label>
    </h5>
  </div>
  <div *ngIf="!isUpload" class="col-xs-4 col-sm-4 col-md-4 col-lg-4 ">
    <div *ngIf="!isUpload">
      <input id="dateSelector" style="width: auto;float: left;" class="form-control input-sm calendar no-spin" type="text">
    </div>
    <div class="headerBtn">
      <button md-icon-button class="dwnldBtn" [disabled]="isDownloading || isLoading" (click)="download(dates[0])" mdTooltip="Download Excel"
        [mdTooltipPosition]="'above'">
        <md-icon>cloud_download</md-icon>
      </button>
      <a md-icon-button [disabled]="isLoading || isDownloading" (click)="excel()" mdTooltip="Upload Excel" [mdTooltipPosition]="'above'">
        <md-icon>cloud_upload</md-icon>
      </a>
    </div>

  </div>
  <div *ngIf="isUpload" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
    <span class="uploadXl">
      <b>Excel Upload</b>
    </span>&nbsp;&nbsp;
    <input class="file" id="uploader" type="file" ng2FileSelect [uploader]="uploader" />
    <div *ngFor="let item of uploader.queue" class="queue">
      <button md-icon-button class="uploadBtn" (click)="item.upload()" [disabled]="item.isReady || item.isUploading || item.isSuccess">
        <md-icon>cloud_upload</md-icon>
      </button>
      <button md-icon-button class="uploadBtn" (click)="excel()" [disabled]="item.isReady || item.isUploading  || uploader.isUploading">
        <md-icon>highlight_off</md-icon>
      </button>
    </div>
    <button *ngIf="uploader?.queue?.length == 0" class="uploadBtn" (click)="excel()" md-icon-button>
      <md-icon>highlight_off</md-icon>
    </button>
  </div>
</div>
<md-spinner class="custom_spinner" *ngIf="isDownloading || isLoading" mode="indeterminate"></md-spinner>
<div class="row">
  <md-card class="card">
    <div class="row text-center noData" *ngIf="effectiveShifts?.items?.length == 0">
      <h5>
        <b>no data to display !</b>
      </h5>
    </div>
    <table class="table table-condensed" *ngIf="effectiveShifts?.items?.length > 0">
      <thead class="primary_thead">
        <tr>
          <th>Name/Code</th>
          <th class="tdWidth"></th>
          <th class="tdWidth" *ngFor="let date of dates">{{date | date:'dd/MM/yyyy'}}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let effectiveShift of effectiveShifts.items | paginate: { id: 'foo',
        itemsPerPage: effectiveShifts.pageSize,
        currentPage: effectiveShifts.pageNo,
        totalItems: effectiveShifts.totalRecords };">
          <td class="customStyle">{{effectiveShift.employee.name || '--'}}
            <br>
            <span class="empCode">{{effectiveShift.employee.code || '--'}}</span>
          </td>
          <td>
            <div class="previousShiftBorder">{{effectiveShift?.previousShift?.shiftType?.name || '--'}}</div>
          </td>
          <td class="tdStyle" *ngFor="let date of dates">
            <aqua-shift-picker [shiftTypes]="shiftTypes.items" [effectiveShifts]="effectiveShift.shifts" [date]="date" (onChange)="changeShift($event, date,effectiveShift.employee)"></aqua-shift-picker>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      <div class="custom_pagination">
        <pagination-controls id="foo" (pageChange)="effectiveShifts.pageNo = $event;getEffectiveShift(effectiveShifts.filters.properties['fromDate']['value']);"></pagination-controls>
        <label>Total Records: {{effectiveShifts.totalRecords}}</label>
        <div class="pageSize">
          <label>Page Size:</label>
          <select name="pageSize" [(ngModel)]="effectiveShifts.pageSize" (change)="effectiveShifts.pageNo = 1;getEffectiveShift(effectiveShifts.filters.properties['fromDate']['value'])">
            <option value=10>10</option>
            <option value=20>20</option>
            <option value=50>50</option>
            <option value=100>100</option>
          </select>
        </div>
      </div>
    </div>

  </md-card>


</div>