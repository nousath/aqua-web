<div class="popup" *ngIf="show">
  <div class="backdrop"></div>
  <div class="outer">
    <div class="content wide">
      <md-spinner class="custom_spinner" *ngIf="isLoading" mode="indeterminate"></md-spinner>
      <h4>Leave Rule</h4>
      <div class="flex-row three section">
        <div class="form-group">
          <label for="name">Name</label><span class="asterisk">*</span>
          <input class="form-control" type="text" [(ngModel)]="leaveType.properties.name">
        </div>
        <div class="form-group">
          <label for="name">Code</label><span class="asterisk">*</span>
          <input class="form-control" type="text" [(ngModel)]="leaveType.properties.code">
        </div>
        <div class="form-group">
          <label for="leaveCategory">Category</label><span class="asterisk">*</span>
          <select class="form-control" [(ngModel)]="leaveType.properties.category">
            <option [ngValue]="null" disabled>select an option</option>
            <option value="lossOfPay">Loss Of Pay</option>
            <option value="OnDuty">On Duty</option>
            <option value="paidLeave">Paid Leave</option>
          </select>
        </div>
        <h5>Limit Rules</h5>

        <div class="form-group">
          <label for="unitsPerDay">Min Per Day</label><span class="asterisk">*</span>
          <select class="form-control" [(ngModel)]="leaveType.properties.unitsPerDay">
            <option [ngValue]="null">select an option</option>
            <option value="1">Full</option>
            <option value="2">Half</option>
            <option value="3">One Third</option>
          </select>
        </div>
        <div class="form-group">
          <label for="carryForward">Max Per Month</label>
          <input class="form-control" type="number" min="0" [(ngModel)]="leaveType.properties.monthlyLimit">
        </div>
        <div class="form-group">
          <label for="unlimited">Is Unlimited</label>
          <select class="form-control" [(ngModel)]="leaveType.properties.unlimited">
            <option [ngValue]="null">select an option</option>
            <option value="true">Yes</option>
            <option value="false">No</option>
          </select>
        </div>
        <h5>Grant Rules</h5>
        <div class="form-group">
          <label for="periodicityType">Trigger</label>
          <select class="form-control" [(ngModel)]="leaveType.properties.periodicity.type" [disabled]="leaveType.properties.unlimited">
            <option [ngValue]="null">select an option</option>
            <option value="daily">Overtime</option>
            <option value="monthly">Month Start</option>
            <option value="yearly">Year Start</option>
            <option value="manual">Manual</option>
          </select>
        </div>
        <div class="form-group">
          <ng-container [ngSwitch]="leaveType.properties.periodicity.type">
            <label *ngSwitchCase="'daily'">Hours for 1 Leave</label>
            <label *ngSwitchCase="'manual'">Initial Balance</label>
            <label *ngSwitchDefault>Credit</label>
          </ng-container>
          <input class="form-control" type="number" min="0" [(ngModel)]="leaveType.properties.periodicity.value"
            [disabled]="!leaveType.properties.periodicity.type || leaveType.properties.unlimited">
        </div>
        <div class="form-group">
          <label for="carryForward">Carry Forward (Yearly)</label>
          <input class="form-control" [disabled]="leaveType.properties.unlimited" type="number" min="0" [(ngModel)]="leaveType.properties.carryForward">
        </div>

      </div>
      <div class="controls-row footer">
        <span class="spacer"></span>
        <button md-button (click)="show= false">Cancel</button>
        <button md-raised-button color="primary" (click)="saveLeaveType()">Submit</button>
        <span class="spacer"></span>
      </div>
    </div>
  </div>
</div>
