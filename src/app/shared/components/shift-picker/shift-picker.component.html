<div class="shift" [class.hasValue]="selectedShiftType && !isDynamic" [class.continue]="!selectedShiftType || isDynamic"
    [style.border-color]="shiftColour()">
    <button [mdMenuTriggerFor]="menu" class="display-text" [disabled]="isDisabled" (click)="getOnDuty()">
        <ng-container *ngIf="selectedShiftType && !isDynamic">
            <span *ngIf="!isWeeklyOff" class="name"> {{selectedShiftType.name}} </span>
            <div *ngIf="isWeeklyOff" class="compressed">
                <span class="name"> {{selectedShiftType.name}} </span>
                <span class="off">Off</span>
            </div>
        </ng-container>

        <ng-container *ngIf="!selectedShiftType || isDynamic">
            <div *ngFor="let item of onSelectedDate" class="continue">
                <!-- <span *ngIf="!isWeeklyOff && !isOnDuty && (item.date | date:'dd/MM/yyyy') === (date | date:'dd/MM/yyyy') && item.status == null">{{item.type | uppercase}}</span> -->
                <span *ngIf="!isWeeklyOff && !isOnDuty && (item.date | date:'dd/MM/yyyy') === (date | date:'dd/MM/yyyy') && item.type === 'present'"
                    style="color:lightskyblue">{{item.type | uppercase}}</span>
                <span *ngIf="!isWeeklyOff && !isOnDuty && (item.date | date:'dd/MM/yyyy') === (date | date:'dd/MM/yyyy') && item.type === 'missSwipe'"
                    style="color:darkorange">{{item.type | uppercase}}</span>
                <span *ngIf="!isWeeklyOff && !isOnDuty && (item.date | date:'dd/MM/yyyy') === (date | date:'dd/MM/yyyy') && item.type === 'absent'"
                    style="color:rgb(248, 91, 117)">{{item.type | uppercase}}</span>
                <span class="approvedFirst" *ngIf="!isWeeklyOff && !isOnDuty && (item.date | date:'dd/MM/yyyy') === (date | date:'dd/MM/yyyy') && item.status === 'approved' && item.units === 'first'">{{item.type | uppercase}}</span>
                <span class="approvedSecond" *ngIf="!isWeeklyOff && !isOnDuty && (item.date | date:'dd/MM/yyyy') === (date | date:'dd/MM/yyyy') && item.status === 'approved' && item.units === 'second'">{{item.type | uppercase}}</span>
                <span class="approvedFull" *ngIf="!isWeeklyOff && !isOnDuty && (item.date | date:'dd/MM/yyyy') === (date | date:'dd/MM/yyyy') && item.status === 'approved' && item.units === 'full'">{{item.type | uppercase}}</span>
                <span class="approvedFirst" *ngIf="!isWeeklyOff && !isOnDuty && (item.date | date:'dd/MM/yyyy') === (date | date:'dd/MM/yyyy') && item.status === 'submitted' && item.units === 'first'">
                    <span class="asterisk">*</span>
                    {{item.type | uppercase}}</span>
                <span class="approvedSecond" *ngIf="!isWeeklyOff && !isOnDuty && (item.date | date:'dd/MM/yyyy') === (date | date:'dd/MM/yyyy') && item.status === 'submitted' && item.units === 'second'">
                    <span class="asterisk">*</span>
                    {{item.type | uppercase}}</span>
                <span class="approvedFull" *ngIf="!isWeeklyOff && !isOnDuty && (item.date | date:'dd/MM/yyyy') === (date | date:'dd/MM/yyyy') && item.status === 'submitted' && item.units === 'full'">
                    <span class="asterisk">*</span>
                    {{item.type | uppercase}}
                </span>
            </div>
            <div *ngIf="onSelectedDate.length == 1 && !isWeeklyOff && !thisWeekOff">
                <div *ngFor="let item of onSelectedDate">
                    <span *ngIf="item.status !== 'approved'">>></span>
                </div>
            </div>
            <span *ngIf="isWeeklyOff || this.thisWeekOff" class="off">Off</span>
            <span *ngIf="isOnDuty" class="off">On Duty</span>
            <span *ngIf="isOnLeave"></span>
        </ng-container>
    </button>
    <md-menu #menu="mdMenu">
        <button md-menu-item (click)="reset()">
            <span>Reset</span>
        </button>
        <button md-menu-item *ngIf="compOffBalance" (click)="applyLeave(compOffBalance)">
            {{compOffBalance?.leaveType?.name}}
        </button>
        <button md-menu-item *ngIf="OnDutyBalance" (click)="applyLeave(OnDutyBalance)">
            {{OnDutyBalance?.leaveType?.name}}
        </button>
        <button md-menu-item (click)="selectedLeave(item)" *ngFor="">{{item.leaveType.name}}</button>
        <button md-menu-item [mdMenuTriggerFor]="off">
            <span>Off</span>
            <!-- <md-slide-toggle [checked]="isWeeklyOff"></md-slide-toggle> -->
        </button>
        <md-menu #off="mdMenu" class="off" xPosition="after" [overlapTrigger]="false">
            <button md-menu-item (click)="setWeeklyOff()">
                <span>Every Week</span>
                <md-slide-toggle [checked]="isWeeklyOff"></md-slide-toggle>
            </button>
            <button md-menu-item (click)="setThisWeekOff()">
                <span>This Week</span>
                <md-slide-toggle [checked]="thisWeekOff"></md-slide-toggle>
            </button>
        </md-menu>
        <!-- <div *ngIf="shiftTypes.length > 5">
                <input class="search" placeholder="Shifts" [(ngModel)]="shiftSearch" [mdMenuTriggerFor]="shifts" (click)="stopPropagation($event)">
            </div>
            <div *ngIf="shiftTypes.length <= 5">
                <span  [mdMenuTriggerFor]="shifts" (click)="stopPropagation($event)">Shifts</span>
            </div> -->
        <!-- <md-divider></md-divider> -->
        <button md-menu-item [mdMenuTriggerFor]="leaves" (onMenuOpen)="getLeaveBalance()">Apply Leave</button>
        <md-menu #leaves="mdMenu" class="leaves" xPosition="after" [overlapTrigger]="false">
            <ng-container *ngIf="leaveBalances.length && !isFetchingLeaveBalances">
                <button *ngFor="let leave of leaveBalances" md-menu-item (click)="applyLeave(leave)">
                    <span>{{leave.leaveType.name}}({{leave.days}})</span>
                </button>
            </ng-container>
            <span md-menu-item *ngIf="!leaveBalances.length && !isFetchingLeaveBalances && !isLeaveExists">No Balance</span>
            <span md-menu-item *ngIf="isFetchingLeaveBalances">Fetching</span>
            <span md-menu-item *ngIf="isLeaveExists">Already Applied</span>
        </md-menu>

        <button md-menu-item [mdMenuTriggerFor]="shifts" (click)="stopPropagation($event)">Shifts</button>
        <md-menu #shifts="mdMenu" class="shifts" xPosition="after" [overlapTrigger]="false">
            <ng-container *ngIf="!isDynamic">
                <button md-menu-item *ngFor="let shiftType of shiftTypes| shiftTypeFilter: shiftSearch" (click)="selectShift(shiftType)">
                    <span>{{shiftType.name}}</span>
                </button>
            </ng-container>
        </md-menu>


    </md-menu>
</div>